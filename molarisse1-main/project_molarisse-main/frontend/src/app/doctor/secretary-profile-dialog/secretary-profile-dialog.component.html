<div class="dialog-container">
  <div class="dialog-header">
    <button mat-icon-button class="close-button" (click)="closeDialog()" matTooltip="Fermer">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  
  <div class="profile-container">
    <div class="profile-header">
      <div class="avatar-container" [ngStyle]="{'background-color': data.statusColor}">
        <mat-icon class="avatar-icon">person</mat-icon>
      </div>
      <div class="header-content">
        <h2 class="secretary-name">{{ data.secretaryName }}</h2>
        <div class="status-chip" [ngStyle]="{'color': data.statusColor}">
          <mat-icon>{{ data.statusIcon }}</mat-icon>
          <span>{{ data.statusLabel }}</span>
        </div>
      </div>
    </div>
    
    <mat-divider></mat-divider>
    
    <div class="profile-body">
      <div class="info-section">
        <h3>Informations de contact</h3>
        
        <div class="info-group" *ngIf="data.secretaryEmail">
          <mat-icon>email</mat-icon>
          <div class="info-content">
            <span class="info-label">Email</span>
            <span class="info-value">{{ data.secretaryEmail }}</span>
          </div>
        </div>
        
        <div class="info-group" *ngIf="data.secretaryPhone">
          <mat-icon>phone</mat-icon>
          <div class="info-content">
            <span class="info-label">Téléphone</span>
            <span class="info-value">{{ data.secretaryPhone }}</span>
          </div>
        </div>
        
        <div class="info-group">
          <mat-icon>calendar_today</mat-icon>
          <div class="info-content">
            <span class="info-label">Date de candidature</span>
            <span class="info-value">{{ data.applicationDate }}</span>
          </div>
        </div>
      </div>
      
      <mat-divider></mat-divider>
      
      <div class="message-section">
        <h3>Message de candidature</h3>
        <div class="message-content">
          {{ data.application.message }}
        </div>
      </div>
      
      <mat-divider *ngIf="data.hasCV"></mat-divider>
      
      <div class="cv-section" *ngIf="data.cvFilePath">
        <h3>CV</h3>
        <div class="cv-actions">
          <button mat-stroked-button color="primary" (click)="viewCV()">
            <mat-icon>open_in_new</mat-icon> Ouvrir dans un nouvel onglet
          </button>
        </div>
        <iframe [src]="cvUrl" width="100%" height="500px" frameborder="0"></iframe>
      </div>
    </div>
    
    <mat-divider></mat-divider>
    
    <div class="profile-actions" *ngIf="data.application.status === 'pending'">
      <button mat-raised-button color="warn" (click)="reject()">
        <mat-icon>cancel</mat-icon>
        Rejeter
      </button>
      <button mat-raised-button color="primary" (click)="approve()">
        <mat-icon>check_circle</mat-icon>
        Approuver
      </button>
    </div>
  </div>
</div>
