<div class="dashboard-container">
  <!-- Vertical Navbar -->
  <nav class="side-nav" [class.collapsed]="!isMenuOpen">
    <div class="logo-section">
      <div class="logo">
        <span class="logo-text">Molarisse</span>
        <span class="role-text">Secrétaire</span>
      </div>
    </div>

    <div class="nav-links">
      <a (click)="showDashboard()" [class.active]="activeSection === 'dashboard'" class="nav-link">
        <i class="fas fa-home"></i>
        <span>Accueil</span>
      </a>
      
      <a (click)="showProfile()" [class.active]="activeSection === 'profile'" class="nav-link">
        <i class="fas fa-user"></i>
        <span>Mon Profile</span>
      </a>

      <a (click)="showVerifiedDoctors()" 
         [class.active]="activeSection === 'verified-doctors'"
         class="nav-link">
        <i class="fas fa-user-md"></i>
        <span>Médecins Vérifiés</span>
      </a>

      <ng-container *ngIf="isAssignedToDoctor">
        <a (click)="showAppointments()" 
           [class.active]="activeSection === 'appointments'"
           class="nav-link">
          <i class="fas fa-calendar-check"></i>
          <span>Gérer les RDV</span>
        </a>
      </ng-container>

      <ng-container *ngIf="!isAssignedToDoctor">
        <a (click)="showDoctorAssignment()" 
           [class.active]="activeSection === 'doctor-assignment'"
           class="nav-link highlight-verification">
          <i class="fas fa-user-plus"></i>
          <span>Rejoindre un Médecin</span>
        </a>
      </ng-container>
    </div>

    <div class="nav-footer">
      <app-notification-bell class="notifications"></app-notification-bell>
      <button class="logout-btn" (click)="logout()">
        <i class="fas fa-sign-out-alt"></i>
        <span>Déconnexion</span>
      </button>
    </div>
  </nav>

  <!-- Header -->
  <header class="dashboard-header">
    <h1 class="header-title">
      <ng-container [ngSwitch]="activeSection">
        <ng-container *ngSwitchCase="'dashboard'">Tableau de bord</ng-container>
        <ng-container *ngSwitchCase="'profile'">Mon Profile</ng-container>
        <ng-container *ngSwitchCase="'verified-doctors'">Médecins Vérifiés</ng-container>
        <ng-container *ngSwitchCase="'appointments'">Gestion des Rendez-vous</ng-container>
        <ng-container *ngSwitchCase="'doctor-assignment'">Rejoindre un Médecin</ng-container>
      </ng-container>
    </h1>
    <div class="header-actions">
      <button class="menu-toggle" (click)="toggleMenu()">
        <i class="fas" [class.fa-bars]="!isMenuOpen" [class.fa-times]="isMenuOpen"></i>
      </button>
      <div class="user-profile" (click)="toggleProfileDropdown()">
        <img [src]="userProfileImage || 'assets/images/default-avatar.png'" alt="Profile" class="profile-image">
        <span class="user-name">{{ userName }}</span>
        <i class="fas fa-chevron-down dropdown-icon" [class.open]="isProfileDropdownOpen"></i>
        <div class="profile-dropdown" [class.show]="isProfileDropdownOpen">
          <a class="dropdown-item" (click)="showProfile()">
            <i class="fas fa-user"></i>
            <span>Profile</span>
          </a>
          <a class="dropdown-item">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </a>
          <a class="dropdown-item logout" (click)="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-wrapper">
      <!-- Dashboard View -->
      <div *ngIf="activeSection === 'dashboard'">
        <div class="welcome-section">
          <h2>Bienvenue dans votre espace secrétaire</h2>
          <p>Gérez les rendez-vous et les tâches administratives.</p>
        </div>
        
        <div *ngIf="!isAssignedToDoctor" class="not-assigned-warning">
          <i class="fas fa-info-circle"></i>
          <div>
            <h3>Non assigné(e) à un médecin</h3>
            <p>Vous devez être assigné(e) à un médecin pour accéder à toutes les fonctionnalités.</p>
            <button mat-raised-button color="primary" (click)="showDoctorAssignment()">
              Postuler pour travailler avec un médecin
            </button>
          </div>
        </div>
        
        <div *ngIf="isAssignedToDoctor" class="stats-container">
          <div class="stat-card">
            <i class="fas fa-calendar-day"></i>
            <div class="stat-details">
              <h3>Rendez-vous aujourd'hui</h3>
              <p class="stat-number">5</p>
            </div>
          </div>
          
          <div class="stat-card">
            <i class="fas fa-clock"></i>
            <div class="stat-details">
              <h3>En attente de confirmation</h3>
              <p class="stat-number">3</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Profile View -->
      <div *ngIf="activeSection === 'profile'">
        <app-profile></app-profile>
      </div>

      <!-- Appointments View -->
      <div *ngIf="activeSection === 'appointments'">
        <app-secretary-appointment-list></app-secretary-appointment-list>
      </div>

      <!-- Doctor Assignment View -->
      <div *ngIf="activeSection === 'doctor-assignment'">
        <app-doctor-application></app-doctor-application>
      </div>

      <!-- Verified Doctors View -->
      <div *ngIf="activeSection === 'verified-doctors'">
        <app-verified-doctors></app-verified-doctors>
      </div>
    </div>
  </main>
</div> 